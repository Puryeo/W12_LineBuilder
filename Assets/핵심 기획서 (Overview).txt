I. 기획 개요 (Overview)

• 프로젝트명: TenTrix Deckbuilding RPG
• 장르: 퍼즐 로그라이크 (공간 관리 퍼즐 + 덱 빌딩 전략)
• 검증 목표:
    1. 전략적 선택: '배치(전진)'와 '쉬기(후퇴)' 사이의 딜레마가 유의미한 긴장감을 주는가?
    2. 위기 관리: '폭탄(숙제)'과 '강제 초기화(파산)' 시스템이 플레이어에게 도전 욕구를 자극하는가?
    3. 성취감: 덱 순환과 퍼즐 해결을 통해 몬스터를 공략하는 흐름이 쾌적한가?

II. 핵심 게임 루프 (Game Loop)

플레이어는 매 턴 손패를 확인하고 [배치] 또는 [쉬기] 중 하나를 선택해야 합니다.
1. 턴 시작 (Start Turn): 현재 손패(3장) 확인.
2. 플레이어 행동 (Action Selection):
    ◦ 선택 A: 블록 배치
        ▪ 그리드에 블록 배치 $\rightarrow$ 연속_쉬기_카운트 0으로 초기화.
        ▪ 라인 클리어 판정 및 장비 발동.
    ◦ 선택 B: 쉬기 (Rest)
        ▪ 배치 포기 $\rightarrow$ 연속_쉬기_카운트 +1 증가.
        ▪ 손패 순환 (가장 왼쪽 카드 버림 + 드로우).
        ▪ [특수 판정] 카운트가 3에 도달 시 '강제 초기화(Grid Collapse)' 발동.
3. 환경 변화 (Environment Tick):
    ◦ 모든 폭탄의 타이머 -1 감소. (0 도달 시 폭발)
    ◦ 몬스터의 폭탄 생성 주기 체크.

III. 상세 시스템 명세 (Specifications)


A. 덱 & 손패 시스템 (Deck & Hand)

• 덱 구성: 총 14장 (테트리스 7종 $\times$ 2장). 덱 소진 시 버린 카드 섞어서 재생성.
• 손패 제한: 3장 고정.
• 큐(Queue) 구조: 손패는 들어온 순서대로 정렬됨.
    ◦ [0]: 가장 오래된 카드 (쉬기 시 버려짐).
    ◦ [1]: 중간 카드.
    ◦ [2]: 방금 드로우한 카드.

B. 쉬기(Rest) 및 강제 초기화 (Rest & Collapse)

블록을 놓을 공간이 없거나, 원하는 블록을 찾기 위해 턴을 소모하는 전략적 행동입니다.
• 기능: 행동력 1 소모. 블록 배치 건너뜀.
• 순환: 손패 [0]번 카드 파괴(Discard) $\rightarrow$ [1], [2]번 좌측 이동 $\rightarrow$ 빈 [2]번에 덱에서 1장 드로우.
• 페널티 (Grid Collapse):
    ◦ 발동 조건: '쉬기'를 연속으로 3회 수행 시.
    ◦ 효과 1 (필드 클린): 그리드 위의 모든 블록(폭탄 포함)을 즉시 제거.
    ◦ 효과 2 (자해 대미지): 플레이어에게 (제거된 블록 총 개수 $\times$ 5) 만큼의 대미지 부여.
    ◦ 결과: 필드는 깨끗해지지만, 체력 손실이 매우 큼. (초반엔 전략적 리셋, 후반엔 사망 확정)

C. 승패 조건 (Win/Loss Condition)

• 승리: 몬스터 HP $\le$ 0.
• 패배: 플레이어 HP $\le$ 0.
    ◦ 변경점: 더 이상 '블록 배치 불가'로 패배하지 않음. 배치 불가 시 '쉬기'를 강제 당하며, 결국 폭탄이나 강제 초기화 대미지로 사망하게 됨.

D. 전투 및 장비 (Combat & Equipment)

• 슬롯: 8개 (Slot #1 ~ #8). 인게임 진입 전 사전 배치.
• 작동 (Cross-Slot): $N$번 슬롯 장비는 가로 $N$행 혹은 세로 $N$열 클리어 시 발동.
• 기본 무기: 줄 클리어 시 10 대미지.

E. 몬스터 & 폭탄 (Monster Logic)

• 행동 패턴: 공격 대신 '폭탄(장애물)' 설치.
• 생성: 6~7턴마다 빈 공간에 폭탄 생성.
• 폭탄 속성:
    ◦ 타이머: 3턴 (매 턴 종료 시 감소).
    ◦ 폭발: 타이머 0 도달 시 플레이어 HP -20.
    ◦ 해체: 해당 줄 클리어 시 제거.
    ◦ 해체 보상: 몬스터에게 30 대미지 + 카드 1장 추가 드로우.